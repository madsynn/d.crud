!function(e,i,t,a){"use strict";e.fn.jimggallery=function(o){return o=e.extend({loadcount:10,totalpage:1,loadAnimation:"seqfade",gallerysize:400,galleryexpand:"magnific",slidedelay:1e3,dimension:.6,tiletype:"normal",photoswipeslideautoplay:1,photoswipeslidedelay:4e3,photoswipehidetitle:0,justifiedheight:250,action:"get_gallery_pagemore",imageScaleMethod:"fit",gallerytype:"isotopewrapper",photoswipescale:""},o),e(this).each(function(){var n=e(this),l=e(this).find(".imagelist-content-wrapper ").find("> div"),d=e(".portfolioloader"),r=null,p=0,s=function(e){return e=e>1920?1920:e,Math.round(e/o.gallerysize)},h=function(e,i){var t=e*o.dimension;return{itemheight:t*i}},g=function(i){var t=e(i).height()/e(i).width(),a=e(i).find("img").height()/e(i).find("img").width();e(i).find("img").removeClass("fixwidthportfolio"),t>a&&e(i).find("img").addClass("fixwidthportfolio")},c=function(){var i=e(".imagelist-content-wrapper > div").width();if("normal"===o.tiletype||"masonry"===o.tiletype){var t=s(i),a=Math.floor(i/t);e(".imggalitem",n).each(function(){for(var i=parseFloat(e(this).data("width")),t=parseFloat(e(this).data("height"));i*a>e(l).width()+5&&i>1;)i-=1;if(e(this).width(Math.floor(a*i)-2*o.margin-1),"normal"===o.tiletype){var n=h(a,t);e(this).css({height:n.itemheight}),g(this)}})}else if("justified"===o.tiletype){var d=o.justifiedheight,r=e(".imggalitem",n).find("img"),p=[];e(r).each(function(i){var t=e(r[i]).get(0).naturalWidth,a=e(r[i]).get(0).naturalHeight;p[i]={width:Math.floor(d*t/a),height:d,img:this}});var c=[],m=0,u=i;c[m]=[],e(p).each(function(){u-=this.width,u>0?c[m].push(this):(u=i-this.width,c[++m]=[],c[m].push(this))});var f=function(i,t,a){e(i).each(function(){var i=Math.floor(t*this.width);e(this.img).parents(".imggalitem").css({width:i,height:a})})},y=function(e,t){var a=i/t,o=Math.floor(d*a);f(e,a,o)};e(c).each(function(t){var a=this,o=0;e(a).each(function(){o+=this.width}),e(c).length-1===t?1.5>i/o?y(a,o,t):f(a,1.1,1.1*d):y(a,o,t)})}},m=function(){e(".isotopewrapper").checkimageloaded(),c(),"isotopewrapper"===o.gallerytype&&e(l).isotope({itemSelector:".imggalitem",masonry:{columnWidth:1}}),t.setTimeout(function(){e(d).fadeOut("slow"),e.animate_load(o.loadAnimation,l,e(l).find(".imggalitem.notloaded"),function(){v(),e(l).find(".imggalitem").removeClass("notloaded")})},500),"magnific"===o.galleryexpand?e(l).magnificPopup({type:"image",delegate:"a",mainClass:"mfp-fade",removalDelay:160,preloader:!1,gallery:{enabled:!0},callbacks:{elementParse:function(i){if("image"===e(i.el).data("type"))i.type="image";else if("html5video"===e(i.el).data("type")){i.type="inline";var a="<video></video>",n=e(a).get(0).canPlayType("video/mp4"),l=e(a).get(0).canPlayType("video/webm"),d=e(a).get(0).canPlayType("video/ogg");o={videoWidth:"100%",videoHeight:"100%"},t.joption.ismobile||"maybe"!==n&&""!==n||"maybe"!==l&&""!==l||"maybe"!==d&&""!==d||(o.mode="shim"),o.features=["playpause","progress","current","duration","tracks","volume","fullscreen"],e(".html5popup-wrapper video").mediaelementplayer(o)}else"soundcloud-gallery"===e(i.el).data("type")?(i.type="iframe",i.src="https://w.soundcloud.com/player/?url="+encodeURIComponent(i.src)):i.type="iframe"}}}):"photoswipe"===o.galleryexpand?(r=e(l).find('.imggalitem a[data-type="image"]').photoSwipe({autoStartSlideshow:o.photoswipeslideautoplay,slideshowDelay:o.photoswipeslidedelay,captionAndToolbarShowEmptyCaptions:o.photoswipehidetitle,imageScaleMethod:o.photoswipescale,margin:0,nextPreviousSlideSpeed:400,slideSpeed:400,captionAndToolbarOpacity:1,captionAndToolbarFlipPosition:!0,getImageSource:function(i){return e(i).attr("href")},getImageCaption:function(i){return e(i).find("a").attr("title")}}),r.addEventHandler(i.EventTypes.onHide,function(){e(t).trigger("resize")})):"swipebox"===o.galleryexpand&&e(l).find("a").swipebox({useCSS:!0,useSVG:!0,hideBarsOnMobile:!0,hideBarsDelay:3e3,videoMaxWidth:1400,beforeOpen:function(){},afterClose:function(){}})},u=function(){e(l).imagesLoaded().done(m).fail(m)},f=function(){p<o.totalpage-1&&(e(".galleryloadmore").fadeIn(),e.ajax({url:o.adminurl,type:"post",dataType:"html",data:{page:++p,action:o.action,pageid:o.pageid},success:function(a){if(""===a)e(".galleryloadmore").fadeOut();else{var n=e(a);e(l).append(n),e(l).imagesLoaded(function(){e(".isotopewrapper").checkimageloaded(),e(".galleryloadmore").fadeOut(),"isotopewrapper"===o.gallerytype?(c(),n.each(function(){e(this).removeClass("notloaded").addClass("alreadyloaded")}),e(l).append(n).isotope("appended",n),t.setTimeout(function(){c(),e(l).isotope("layout"),t.setTimeout(function(){e(t).trigger("resize")},2e3),v()},1e3),"photoswipe"===o.galleryexpand&&(t.Code.PhotoSwipe.unsetActivateInstance(r),t.Code.PhotoSwipe.detatch(r),r=e(l).find('.imggalitem a[data-type="image"]').photoSwipe({autoStartSlideshow:o.photoswipeslideautoplay,slideshowDelay:o.photoswipeslidedelay,captionAndToolbarShowEmptyCaptions:o.photoswipehidetitle,imageScaleMethod:o.photoswipescale,margin:0,nextPreviousSlideSpeed:400,slideSpeed:400,captionAndToolbarOpacity:1,captionAndToolbarFlipPosition:!0,getImageSource:function(i){return e(i).attr("href")},getImageCaption:function(i){return e(i).find("img").attr("alt")}}),r.addEventHandler(i.EventTypes.onHide,function(){e(t).trigger("resize")}))):(e(l).append(n),e(l).find(".imggalitem").removeClass("notloaded"))})}}}))},y=100,w=function(){t.jpobj.globaltop+e(t).height()>e(a).height()-y&&(e(t).unbind("jscroll",w),f())};t.setInterval(function(){e(l).isotope("layout")},500);var v=function(){e(t).bind("jscroll",w),w()};u(),e(t).bind({resize:function(){c()}})})}}(jQuery,window.Code.PhotoSwipe,window,document);