function ScriptLoader(){}ScriptLoader.prototype={timer:function(times,delay,delayMore,test,failure,result){var me=this;if(times==-1||times>0){setTimeout(function(){result=(test())?1:0;me.timer((result)?0:(times>0)?--times:times,delay+((delayMore)?delayMore:0),delayMore,test,failure,result);},(result||delay<0)?0.1:delay);}else if(typeof failure=='function'){setTimeout(failure,1);}},addEvent:function(el,eventName,eventFunc){if(typeof el!='object'){return false;}if(el.addEventListener){el.addEventListener(eventName,eventFunc,false);return true;}if(el.attachEvent){el.attachEvent("on"+eventName,eventFunc);return true;}return false;},require:function(url,args){var me=this;args=args||{};var scriptTag=document.createElement('script');var headTag=document.getElementsByTagName('head')[0];if(!headTag){return false;}setTimeout(function(){var f=(typeof args.success=='function')?args.success:function(){};args.failure=(typeof args.failure=='function')?args.failure:function(){};var fail=function(){if(!scriptTag.__es){scriptTag.__es=true;scriptTag.id='failed';args.failure(scriptTag);}};scriptTag.onload=function(){scriptTag.id='loaded';f(scriptTag);};scriptTag.type='text/javascript';scriptTag.async=(typeof args.async=='boolean')?args.async:false;scriptTag.charset='utf-8';me.__es=false;me.addEvent(scriptTag,'error',fail);me.timer(15,1000,0,function(){return(scriptTag.id=='loaded');},function(){if(scriptTag.id!='loaded'){fail();}});scriptTag.src=url;setTimeout(function(){try{headTag.appendChild(scriptTag);}catch(e){fail();}},1);},(typeof args.delay=='number')?args.delay:1);return true;}};